---
---

<header class="bg-white shadow-sm sticky top-0 z-40 transition-colors duration-300 border-b-2 border-gray-100">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
    <div class="flex items-center justify-between">
      <a href="/kotobako" class="flex items-center gap-3 hover:opacity-80 transition-opacity">
        <div>
          <h1 class="text-2xl font-bold text-gray-800">
            ã“ã¨ã°ç®±
          </h1>
          <p class="text-sm text-gray-400">
            ã‚»ãƒªãƒ•ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
          </p>
        </div>
      </a>
      
      <nav class="flex gap-4 items-center">
        <a 
          href="/kotobako" 
          class="px-4 py-2 rounded-full hover:bg-purple-50 transition-all duration-200 text-gray-600"
        >
          ğŸ  ãƒ›ãƒ¼ãƒ 
        </a>
        
        <a 
          href="/kotobako/favorites" 
          class="px-4 py-2 rounded-full hover:bg-purple-50 transition-all duration-200 text-gray-600 relative"
        >
          ğŸ’– ãŠæ°—ã«å…¥ã‚Š
          <span id="favorite-count-badge" class="absolute -top-1 -right-1 bg-purple-400 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold hidden">
            0
          </span>
        </a>
      </nav>
    </div>
  </div>
</header>

<script is:inline>
  // ãŠæ°—ã«å…¥ã‚Šä»¶æ•°ãƒãƒƒã‚¸ã‚’æ›´æ–°
  function updateFavoriteBadge() {
    const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
    const badge = document.getElementById('favorite-count-badge');
    
    if (badge) {
      if (favorites.length > 0) {
        badge.textContent = String(favorites.length);
        badge.classList.remove('hidden');
      } else {
        badge.classList.add('hidden');
      }
    }
  }

  // åˆå›èª­ã¿è¾¼ã¿æ™‚
  updateFavoriteBadge();

  // localStorageã®å¤‰æ›´ã‚’ç›£è¦–ï¼ˆåˆ¥ã‚¿ãƒ–ã§ã®å¤‰æ›´ã‚‚åæ˜ ï¼‰
  window.addEventListener('storage', (e) => {
    if (e.key === 'favorites') {
      updateFavoriteBadge();
    }
  });

  // åŒã˜ãƒšãƒ¼ã‚¸å†…ã§ã®å¤‰æ›´ã‚‚ç›£è¦–
  const originalSetItem = localStorage.setItem;
  localStorage.setItem = function(key, value) {
    originalSetItem.call(this, key, value);
    if (key === 'favorites') {
      updateFavoriteBadge();
    }
  };
</script>