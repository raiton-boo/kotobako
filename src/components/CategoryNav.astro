---
import categoriesData from '../data/categories.json';

interface Category {
  id: string;
  name: string;
  icon: string;
  description: string;
}

interface CategoriesData {
  categories: Category[];
}

const data = categoriesData as CategoriesData;
const currentPath = Astro.url.pathname;
---

<aside class="hidden lg:block w-64 flex-shrink-0">
  <nav class="sticky top-24 bg-white rounded-2xl shadow-md p-6">
    <h2 class="text-lg font-bold text-gray-800 mb-4">
      カテゴリー
    </h2>
    
    <ul class="space-y-2">
      <li>
        <a
          href="/kotobako"
          class={`block px-4 py-3 rounded-xl transition-all duration-200 ${
            currentPath === '/kotobako' || currentPath === '/kotobako/'
              ? 'bg-purple-400 text-white font-bold'
              : 'text-gray-600 hover:bg-purple-50'
          }`}
        >
          ✨ すべて
        </a>
      </li>
      
      {data.categories.map((category) => {
        const isActive = currentPath.includes(`/category/${category.id}`);
        return (
          <li>
            <a
              href={`/kotobako/category/${category.id}`}
              class={`block px-4 py-3 rounded-xl transition-all duration-200 ${
                isActive
                  ? 'bg-purple-400 text-white font-bold'
                  : 'text-gray-600 hover:bg-purple-50'
              }`}
            >
              {category.icon} {category.name}
            </a>
          </li>
        );
      })}
    </ul>
  </nav>
</aside>